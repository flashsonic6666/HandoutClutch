<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<title></title>

<meta name="viewport" content="width=device-width, initial-scale=1.0">

</head>

<style>

body {

	background-image: url('NyanCt.png');
	background-attachment: fixed;
	color: #333;
}
.center {
  display: block;
  margin-left: auto;
  margin-right: auto;
  width: 50%;
}
#ptable{
    position:absolute;
  top:0;
  right:0; 
	border: 1px solid black;
	width=50%;
}
	
</style>

<body>
	
	<!--Add Local-->
	Form to Add a Key
	<form action="/action_page.php">
	  <label for="keyA">Key:</label>
	  <input type="text" id="keyA" name="keyA"><br><br>
	  <label for="a">Add:        </label>
	  <input type="text" id="a" name="a"><br><br>
	  Confirm: <span id="result"></span>
	  <input type="button" value="Submit" onClick="add();">
	</form>
	
	Form to Remove a Key
	<form action="/action_page.php">
	  <label for="keyR">Key:</label>
	  <input type="text" id="keyR" name="keyR"><br><br>
	  Confirm: <span id="result"></span>
	  <input type="button" value="Submit" onClick="remove();">
	</form>
	
	Form to add an Array
	<form action="/action_page.php">
	  <label for="arrayName">Array Name</label>
	  <input type="text" id="arrayName" name="arrayName"><br><br>
	  Confirm: <span id="result"></span>
	  <input type="button" value="Submit" onClick="addArray();">
	</form>
	
	Add elements to an array
	<form action="/action_page.php">
	  <label for="arrayName1">Array Name</label>
	  <input type="text" id="arrayName1" name="arrayName1"><br><br>
	 <label for="elements">Elements with commas no spaces</label>
	  <input type="text" id="elements" name="elements"><br><br>
	  Confirm: <span id="result"></span>
	  <input type="button" value="Submit" onClick="addToArray();">
	</form>
	
	<!--Displaying Image-->
	<img id="problem" src="NyanCat.png" style="width:100px" class="center">
	
	<!--Table!-->
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script>
	<table id="ptable">
	</table>
		
	<script type="text/javascript">
	resetTable();
		
	function resetTable(){
		$("#ptable tr").remove(); 
		var tableBody= "";

		tableBody = tableBody + "<tr>";
		 tableBody = tableBody + "<th>" + "key" + "</th>" + "<th>" + "value" + "</th>";
		 tableBody = tableBody + "</tr>";  


		// iterate localStorage
		for (var i = 0; i < localStorage.length; i++) {

		  // set iteration key name
		  var key = localStorage.key(i);

		  // use key name to retrieve the corresponding value
		  var value = localStorage.getItem(key);

		  // console.log the iteration key and value
		  tableBody = tableBody + "<tr>";
		  tableBody = tableBody + "<th>" + key + "</th>" + "<th>" + value + "</th>";
		  tableBody = tableBody + "</tr>";  

		}

		tableBody = tableBody + "<tr>";
		  tableBody = tableBody + "<th>" + localStorage.length + "</th>" + "<th>" + localStorage.length + "</th>";
		  tableBody = tableBody + "</tr>";  
		$("#ptable").append(tableBody);
	}
	function add() {
		var key = document.getElementById("keyA").value;
		var answer = document.getElementById("a").value;
		localStorage.setItem(key, answer);
		resetTable();
          }
	function remove() {
		var key = document.getElementById("keyR").value;
		localStorage.removeItem(key);
		resetTable();
          }
	function addArray(){
		var key = document.getElementById("arrayName").value;
		var names = [["1","1"]];
		localStorage.setItem(key, JSON.stringify(names));
		resetTable();
	}
	function addToArray(){
		var key = document.getElementById("arrayName1").value;
		var eles = document.getElementById("elements").value;
		
		var temp="";
		
		var x=JSON.parse(localStorage.getItem(key));
		
		var yes=x.size();
		
		for(var i=0; i<eles.length; i++){
			if(eles.charAt(i)==','){
			   x[yes].push(temp);
			   temp="";
			}
			else{
			   temp+=eles.charAt(i);
			}
			
			if(i==eles.length-1){
			   x[yes].push(temp);
			   temp="";
			}
		}
		
		
		localStorage.setItem(key, x);
		resetTable();
	}
   </script>
</body>
</html>
