<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<title></title>

<meta name="viewport" content="width=device-width, initial-scale=1.0">

</head>

<style>

body {

	background-image: url('NyanCt.png');
	background-attachment: fixed;
	color: #333;
}
.center {
  display: block;
  margin-left: auto;
  margin-right: auto;
  width: 50%;
}
#ptable{
    position:absolute;
  top:0;
  right:0; 
	border: 1px solid black;
	width=50%;
}
	
</style>

<body>
	<!--Table!-->
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script>
	<table id="ptable">
	</table>
	
	<script type="text/javascript">
		
	resetTable();
		
	function resetTable(){
		$("#ptable tr").remove(); 
		
		var tableBody= "";

		tableBody = tableBody + "<tr>";
		 tableBody = tableBody + "<th>" + "   Handout   " + "</th>" + "<th>" + "   Points Obtained   " + "</th>" + "<th>" + "   Total Points Needed   " + "</th>" 
			 + "<th>" + "   Percentage Obtained   " + "</th>" + "<th>" + "   Total Possible Points   " + "</th>";
		 tableBody = tableBody + "</tr>";  


 		 var correctness=JSON.parse(localStorage.getItem("correctness"));
		
		// iterate localStorage
		for (var i = 0; i < correctness.length; i++) {
		  
		var putt=getPoints(i);
				
		  // console.log the iteration key and value
		  tableBody = tableBody + "<tr>";
		  tableBody = tableBody + "<th>" + putt[0] + "</th>" + "<th>" + putt[1] + "</th>" + "<th>" + putt[2] + "</th>" + "<th>" + putt[3] + "</th>"
			+ "<th>" + putt[4] + "</th>";
		  tableBody = tableBody + "</tr>";  

		}
		 
		$("#ptable").append(tableBody);
		
	}
	
   function getPoints(p1){
      
      //Holds points, required points, percentage, total points in handout
      var ans=[];
	   
      var score=0;
      var total=0;
      
      var points=JSON.parse(localStorage.getItem("points"));
      var correctness=JSON.parse(localStorage.getItem("correctness"));
      var pointsNeeded=JSON.parse(localStorage.getItem("pointsNeeded"));
	var handoutName=JSON.parse(localStorage.getItem("handoutName"));
      
      for(var i=0; i<points[parseInt(p1)].length; i++){
        score+=parseInt(points[parseInt(p1)][i])*parseInt(correctness[parseInt(p1)].charAt(i));
        total+=parseInt(points[parseInt(p1)][i]);
      }
      
      ans.push(handoutName[parseInt(p1)]);   
      ans.push(score);
      ans.push(pointsNeeded[parseInt(p1)]);
      ans.push((100*parseInt(score)/parseInt(pointsNeeded[parseInt(p1)])) + "%");
      ans.push(total);
      
      return ans;
   }
        </script>
</body>
</html>
